<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carta para MIMI <3</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

  <style>
    /* Fondo y estilo general */
    body {
      background: url("sakura.jpg") no-repeat center center fixed;
      background-size: cover;
      font-family: "Segoe UI", sans-serif;
      text-align: center;
      overflow: hidden;
      opacity: 0; /* Para transici칩n suave */
      transition: opacity 2s ease-in;
    }
    body.mostrar {
      opacity: 1; /* Se activa cuando inicia la carta */
    }

    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      animation: aparecer 1.2s ease forwards;
    }

    @keyframes aparecer {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .carta {
      background: #fff0f5;
      padding: 20px;
      border-radius: 15px;
      font-size: 1em;
      color: #333;
      text-align: left;
    }

    .petal {
      position: fixed;
      top: -50px;
      width: 30px;
      height: 30px;
      background-image: url("petalos.png");
      background-size: contain;
      background-repeat: no-repeat;
      opacity: 0.8;
      z-index: 1;
      animation: fall linear infinite;
      pointer-events: none;
    }

    @keyframes fall {
      0% { transform: translateY(0) rotate(0deg); opacity: 0.8; }
      100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
    }

    .modal-content.animate__animated {
      animation-duration: 1s;
    }
  </style>
</head>
<body>

  <!-- Modal de inicio -->
  <div class="modal fade" id="inicioModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content text-center p-4">
        <h5 class="text-danger mb-3">游꺚 Hola, Mimi 游꺚</h5>
        <p class="mb-4">Tengo algo muy especial que decirte. Presiona el bot칩n para comenzar esta aventura emocional 游눘</p>
        <button id="iniciarBtn" class="btn btn-primary">Quiero ver la carta 游눏</button>
      </div>
    </div>
  </div>

  <!-- M칰sica -->
  <div class="container mt-3">
    <label class="form-label text-light">M칰sica que me recuerda a ti:</label>
    <audio id="musica" controls class="w-100 rounded border">
      <source src="musica.mp3" type="audio/mpeg" />
    </audio>
  </div>

  <!-- Carta principal -->
  <div class="container mt-4 fade-in">
    <div class="card shadow-lg p-4 rounded" style="background-color: rgba(255, 255, 255, 0.9)">
      <h1 class="text-danger mb-3 animate__animated animate__heartBeat">
        游꺚 Desde hace tiempo quer칤a decirte algo... 游꺚
      </h1>

      <div class="carta text-start">
        <div id="parrafo1"></div>
        <div id="parrafo2"></div>
        <div id="parrafo3"></div>
        <div id="parrafo4" class="fw-bold text-danger"></div>
      </div>

      <!-- Botones de respuesta -->
      <div id="botones" class="text-center mt-3" style="display: none;">
        <button class="btn btn-success w-100 mb-3 animate__animated animate__fadeInUp"
          onclick="responder('Prometo nunca fallarte y una lealtad enorme, as칤 como un amor incondicional dispuesto a mejorar por ti.', 'https://media.tenor.com/fJ76eNKqvFMAAAAM/pink-heart.gif')">
          La respuesta es SIII
        </button>

        <button class="btn btn-danger w-100 animate__animated animate__fadeInUp"
          onclick="responder('Bueno, entonces m치ndame un video haciendo un mortal triple para confirmar el NO.', 'https://media.tenor.com/F5qpZHSg_NwAAAAM/햨쮏쮏쐃쮏죨cq.gif')">
          La respuesta es NOOO
        </button>
      </div>
    </div>
  </div>

  <!-- Modal de respuesta -->
  <div class="modal fade animate__animated animate__fadeInDown" id="respuestaModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content animate__animated animate__fadeInUp">
        <div class="modal-header bg-light">
          <h5 class="modal-title text-danger">游눏 Tu respuesta</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body text-center">
          <div class="fs-4 mb-3" id="modalTexto"></div>
          <img id="modalImagen" src="" class="img-fluid rounded d-none" alt="Respuesta emocional" />
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Modal de inicio al cargar
    window.addEventListener("load", () => {
      let modalInicio = new bootstrap.Modal(document.getElementById("inicioModal"));
      modalInicio.show();

      document.getElementById("iniciarBtn").addEventListener("click", () => {
        modalInicio.hide();
        document.body.classList.add("mostrar"); // Activa transici칩n de fondo
        playMusic();                            // Reproduce m칰sica con fade
        iniciarPetalos();                       // Lanza p칠talos
        iniciarCarta();                         // Escribe la carta tipo m치quina de escribir
      });
    });

    // Reproducci칩n de m칰sica con volumen gradual
    function playMusic() {
      const music = document.getElementById("musica");
      music.volume = 0;
      music.play().catch(error => {
        console.log("Reproducci칩n bloqueada por el navegador:", error);
      });

      let vol = 0;
      const fade = setInterval(() => {
        if (vol < 1) {
          vol += 0.05;
          music.volume = vol;
        } else {
          clearInterval(fade);
        }
      }, 150);
    }

    // Mostrar respuesta en modal
    function responder(texto, imagenURL) {
      const textoElemento = document.getElementById("modalTexto");
      const imagenElemento = document.getElementById("modalImagen");

      textoElemento.textContent = texto;
      imagenElemento.src = imagenURL;
      imagenElemento.classList.remove("d-none");

      let modal = new bootstrap.Modal(document.getElementById("respuestaModal"));
      modal.show();
    }

    // Contenido de los p치rrafos
    const textos = [
      "Cada momento que paso contigo, cada conversaci칩n, cada risa compartida, cada gesto tuyo...",
      "Me inspiras. Me motivas. Me haces querer ser una mejor versi칩n de m칤 mismo...",
      "No se trata solo de lo que siento por ti, sino de lo que quiero construir contigo...",
      "Por todo esto, quiero preguntarte: 쯊e gustar칤a que esto escalara a algo m치s y fu칠ramos novios?"
    ];

    // Escribir p치rrafos como m치quina de escribir
    function escribirTexto(elementId, texto, delay) {
      const el = document.getElementById(elementId);
      let i = 0;
      setTimeout(() => {
        const interval = setInterval(() => {
          el.innerHTML += texto.charAt(i);
          i++;
          if (i === texto.length) clearInterval(interval);
        }, 40);
      }, delay);
    }

    function iniciarCarta() {
      escribirTexto("parrafo1", textos[0], 0);
      escribirTexto("parrafo2", textos[1], 15100);
      escribirTexto("parrafo3", textos[2], 24100);
      escribirTexto("parrafo4", textos[3], 35000);

      // Mostrar botones al final
      setTimeout(() => {
        document.getElementById("botones").style.display = "block";
      },
